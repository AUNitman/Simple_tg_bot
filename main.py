import logging
import re
from datetime import datetime
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import (
    Application,
    CommandHandler,
    MessageHandler,
    filters,
    ContextTypes,
)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN = "5735189716:AAHPlH_BIVLn5d52l82GBPXfPIUMGMXUGno"


class B2BTariffBot:
    """–ë–æ—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ B2B-—Ç–∞—Ä–∏—Ñ–∞–º"""
    
    def __init__(self):
        self.knowledge_base = self._build_knowledge_base()
        
        # –°–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
        self.synonyms = {
            "b2b": ["–±2–±", "–±–∏–∑–Ω–µ—Å", "–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π", "–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤", "b 2 b"],
            "—Ç–∞—Ä–∏—Ñ": ["—Ç–∞—Ä–∏—Ñ—ã", "—Ä–∞—Å—Ü–µ–Ω–∫–∏", "—Ü–µ–Ω—ã", "–ø—Ä–∞–π—Å"],
            "—Å–∫–∏–¥–∫–∞": ["—Å–∫–∏–¥–∫–∏", "–¥–∏—Å–∫–æ–Ω—Ç", "–ø—Ä–æ—Ü–µ–Ω—Ç"],
            "–∫–æ–º–∏—Å—Å–∏—è": ["–∫–æ–º–∏—Å—Å–∏–∏", "–ø—Ä–æ—Ü–µ–Ω—Ç —è–Ω–¥–µ–∫—Å–∞", "—Å–∫–æ–ª—å–∫–æ –ø–ª–∞—Ç–∏—Ç—å"],
            "–ø–æ–¥–∫–ª—é—á–∏—Ç—å": ["–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ", "—Å–æ–∑–¥–∞—Ç—å", "–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å", "–≤–∫–ª—é—á–∏—Ç—å", "–¥–æ–±–∞–≤–∏—Ç—å"],
            "–æ—Ç–∫–ª—é—á–∏—Ç—å": ["–≤—ã–∫–ª—é—á–∏—Ç—å", "—É–¥–∞–ª–∏—Ç—å", "—É–±—Ä–∞—Ç—å", "–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ"],
            "–æ—Ç–µ–ª—å": ["–æ—Ç–µ–ª–∏", "–≥–æ—Å—Ç–∏–Ω–∏—Ü–∞", "–≥–æ—Å—Ç–∏–Ω–∏—Ü—ã", "–æ–±—ä–µ–∫—Ç"],
            "–∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã": ["–∞–ø–∞—Ä—Ç—ã", "–∫–≤–∞—Ä—Ç–∏—Ä–∞", "–∂–∏–ª—å—ë", "–∂–∏–ª—å–µ"],
            "–¥–æ–∫—É–º–µ–Ω—Ç—ã": ["–¥–æ–∫—É–º–µ–Ω—Ç", "–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ", "–∞–∫—Ç—ã", "—Å–ø—Ä–∞–≤–∫–∞"],
            "—ç–∫—Å—Ç—Ä–∞–Ω–µ—Ç": ["extranet", "–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", "–∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞"],
            "–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ": ["–±—Ä–æ–Ω—å", "–±—Ä–æ–Ω–∏", "–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å", "–∑–∞–∫–∞–∑"],
            "–∫–ª–∏–µ–Ω—Ç": ["–∫–ª–∏–µ–Ω—Ç—ã", "–≥–æ—Å—Ç—å", "–≥–æ—Å—Ç–∏", "–∫–æ–º–ø–∞–Ω–∏—è", "—é—Ä–ª–∏—Ü–æ"],
        }
    
    def _build_knowledge_base(self) -> list:
        """–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É"""
        return [
            # –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ
            {
                "patterns": [
                    "—á—Ç–æ —Ç–∞–∫–æ–µ b2b", "—á—Ç–æ —Ç–∞–∫–æ–µ –±2–±", "—á—Ç–æ –∑–∞ —Ç–∞—Ä–∏—Ñ", 
                    "b2b —Ç–∞—Ä–∏—Ñ —ç—Ç–æ", "–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ —ç—Ç–æ",
                    "—Ä–∞—Å—Å–∫–∞–∂–∏ –æ b2b", "–æ–±—ä—è—Å–Ω–∏ b2b"
                ],
                "response": """üìã **–ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ?**

**B2B-—Ç–∞—Ä–∏—Ñ** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–ª—è –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–∫–∏–¥–∫—É –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞.

üè∑ –ù–∞ —Å–µ—Ä–≤–∏—Å–µ —Ç–∞–∫–æ–π —Ç–∞—Ä–∏—Ñ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –±–µ–π–¥–∂–µ–º **¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π¬ª**:
‚Ä¢ –í –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ
‚Ä¢ –ù–∞ –∫–∞—Ä—Ç–µ
‚Ä¢ –í –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–∞—Ä–∏—Ñ–∞

üîç –ë–∏–∑–Ω–µ—Å-–∞—É–¥–∏—Ç–æ—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ —Ç–∞–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ñ–∏–ª—å—Ç—Ä—É **¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã¬ª**.""",
                "category": "what_is"
            },
            
            # –ü–æ–ª—å–∑–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
            {
                "patterns": [
                    "–∑–∞—á–µ–º –Ω—É–∂–µ–Ω", "–ø–æ–ª—å–∑–∞", "–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞", "–≤—ã–≥–æ–¥–∞",
                    "–ø–æ—á–µ–º—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å", "–ø–ª—é—Å—ã b2b", "—á—Ç–æ –¥–∞—ë—Ç"
                ],
                "response": """‚úÖ **–ü–æ–ª—å–∑–∞ B2B-—Ç–∞—Ä–∏—Ñ–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤:**

üìà **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏** –æ–±—ä–µ–∫—Ç–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –Ω–∏–∑–∫–∏–π —Å–µ–∑–æ–Ω

üîç **–£–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫** ‚Äî –±–∏–∑–Ω–µ—Å-–∞—É–¥–∏—Ç–æ—Ä–∏—è –±—ã—Å—Ç—Ä–æ –Ω–∞–π–¥—ë—Ç –≤–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ñ–∏–ª—å—Ç—Ä—É ¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã¬ª

üëÄ **–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è** ‚Äî —Ç–∞—Ä–∏—Ñ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –±–µ–π–¥–∂–µ–º ¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π¬ª –Ω–∞ –≤—ã–¥–∞—á–µ, –∫–∞—Ä—Ç–µ –∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏

üíº **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è** ‚Äî –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º""",
                "category": "benefits"
            },
            
            # –ö—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å
            {
                "patterns": [
                    "–∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å", "–∫—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å",
                    "–¥–ª—è –∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ", "–º–æ–≥—É –ª–∏ —è –ø–æ–¥–∫–ª—é—á–∏—Ç—å",
                    "–∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã", "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–±—ä–µ–∫—Ç—É"
                ],
                "response": """üè® **–ö—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å B2B-—Ç–∞—Ä–∏—Ñ:**

–ü–æ–¥–∫–ª—é—á–∞—Ç—å B2B-—Ç–∞—Ä–∏—Ñ—ã –º–æ–≥—É—Ç:

‚úÖ **–û—Ç–µ–ª–∏**, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç
‚úÖ **–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã**, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç

‚ùó –û–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç.""",
                "category": "who_can_connect"
            },
            
            # –ö—Ç–æ –º–æ–∂–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
            {
                "patterns": [
                    "–∫—Ç–æ –º–æ–∂–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å", "–∫—Ç–æ –≤–∏–¥–∏—Ç —Ç–∞—Ä–∏—Ñ",
                    "–¥–ª—è –∫–∞–∫–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤", "–∫—Ç–æ –ø–æ–∫—É–ø–∞–µ—Ç",
                    "—é—Ä–ª–∏—Ü–∞", "—Ñ–∏–∑–ª–∏—Ü–∞", "–∏–ø"
                ],
                "response": """üë• **–ö—Ç–æ –º–æ–∂–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å B2B-—Ç–∞—Ä–∏—Ñ—ã:**

**–°–µ–π—á–∞—Å –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è:**
‚Ä¢ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π (—Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü)

**–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è:**
‚Ä¢ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü
‚Ä¢ –ò–ü –Ω–∞ –£–°–ù
‚Ä¢ –ö–æ–º–ø–∞–Ω–∏–π –Ω–∞ –û–°–ù–û —Å–æ —Å—Ç–∞–≤–∫–æ–π –ù–î–° 0%

‚è≥ –ü–æ–∑–∂–µ ‚Äî –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è.

üîê –¢–∞—Ä–∏—Ñ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º**.""",
                "category": "who_can_book"
            },
            
            # –ö–æ–º–∏—Å—Å–∏—è
            {
                "patterns": [
                    "–∫–æ–º–∏—Å—Å–∏—è", "—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤", "–∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç",
                    "—Å–∫–æ–ª—å–∫–æ –ø–ª–∞—Ç–∏—Ç—å —è–Ω–¥–µ–∫—Å—É", "—Ä–∞–∑–º–µ—Ä –∫–æ–º–∏—Å—Å–∏–∏",
                    "18", "18%"
                ],
                "response": """üí∞ **–ö–æ–º–∏—Å—Å–∏—è –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π:**

–ö–æ–º–∏—Å—Å–∏—è –∑–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ B2B-—Ç–∞—Ä–∏—Ñ—É —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **18%**.""",
                "category": "commission"
            },
            
            # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞
            {
                "patterns": [
                    "–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞", "–∫–∞–∫–∞—è —Å–∫–∏–¥–∫–∞", "—Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏",
                    "—Å–∫–æ–ª—å–∫–æ —Å–∫–∏–¥–∫–∞", "5%", "–Ω–µ –º–µ–Ω–µ–µ"
                ],
                "response": """üè∑ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –ø–æ B2B-—Ç–∞—Ä–∏—Ñ—É:**

–°–∫–∏–¥–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **–Ω–µ –º–µ–Ω–µ–µ 5%** –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞.

üí° –í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–∏–¥–∫—É –±–æ–ª—å—à–µ 5% –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.""",
                "category": "discount"
            },
            
            # –£—Å–ª–æ–≤–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–±—â–µ–µ)
            {
                "patterns": [
                    "—É—Å–ª–æ–≤–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è", "—É—Å–ª–æ–≤–∏—è", "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è",
                    "—á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
                ],
                "response": """üìù **–£—Å–ª–æ–≤–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è B2B-—Ç–∞—Ä–∏—Ñ–∞:**

1Ô∏è‚É£ **–ö–æ–º–∏—Å—Å–∏—è** –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π ‚Äî **18%**

2Ô∏è‚É£ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞** ‚Äî –Ω–µ –º–µ–Ω–µ–µ **5%** –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞

3Ô∏è‚É£ **–û–±—ä–µ–∫—Ç** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç

4Ô∏è‚É£ B2B-—Ç–∞—Ä–∏—Ñ —Å–æ–∑–¥–∞—ë—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞**

‚è± –¢–∞—Ä–∏—Ñ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫** –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.""",
                "category": "conditions"
            },
            
            # –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª–µ–π
            {
                "patterns": [
                    "–∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Ç–µ–ª—å", "–ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª—è",
                    "—Å–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ –æ—Ç–µ–ª—å", "–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–µ–ª—å",
                    "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –æ—Ç–µ–ª—è", "–∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ"
                ],
                "response": """üè® **–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å B2B-—Ç–∞—Ä–∏—Ñ –¥–ª—è –æ—Ç–µ–ª—è:**

1Ô∏è‚É£ –í **–≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç–µ** –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–¢–∞—Ä–∏—Ñ—ã¬ª**

2Ô∏è‚É£ –í –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É –Ω–∞–∂–º–∏—Ç–µ **¬´–°–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ¬ª**

3Ô∏è‚É£ –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **¬´–ó–∞–∫—Ä—ã—Ç—ã–π B2B —Ç–∞—Ä–∏—Ñ¬ª**

4Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω B2B-—Ç–∞—Ä–∏—Ñ

‚ö†Ô∏è *B2B-—Ç–∞—Ä–∏—Ñ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞*

5Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **—Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏** (–º–∏–Ω–∏–º—É–º 5%)

6Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ **–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–æ–º–µ—Ä–æ–≤** –¥–ª—è —Ç–∞—Ä–∏—Ñ–∞

7Ô∏è‚É£ –£–∫–∞–∂–∏—Ç–µ **–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞**

8Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ **¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª**

‚úÖ –í —Å–ø–∏—Å–∫–µ —Ç–∞—Ä–∏—Ñ–æ–≤ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–º–µ—Ç–∫–∞ **¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π¬ª**
‚è± –¢–∞—Ä–∏—Ñ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫**""",
                "category": "setup_hotel"
            },
            
            # –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
            {
                "patterns": [
                    "–∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã", "–ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤",
                    "—Å–æ–∑–¥–∞—Ç—å —Ç–∞—Ä–∏—Ñ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã", "–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã",
                    "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤"
                ],
                "response": """üè† **–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å B2B-—Ç–∞—Ä–∏—Ñ –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤:**

1Ô∏è‚É£ –í **–≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç–µ** –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–û–±—ä–µ–∫—Ç—ã¬ª**

2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω—ë–º

3Ô∏è‚É£ –ü—Ä–æ–ª–∏—Å—Ç–∞–π—Ç–µ –≤–Ω–∏–∑ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ **¬´–¶–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å¬ª** –≤ –º–µ–Ω—é —Å–ø—Ä–∞–≤–∞

4Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ **¬´–¢–∞—Ä–∏—Ñ—ã¬ª** ‚Üí **¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ¬ª**

5Ô∏è‚É£ –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é **¬´–ó–∞–∫—Ä—ã—Ç—ã–π B2B —Ç–∞—Ä–∏—Ñ¬ª**

6Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ

‚ö†Ô∏è *–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞*

7Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **—Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏** (–º–∏–Ω–∏–º—É–º 5%)

8Ô∏è‚É£ –£–∫–∞–∂–∏—Ç–µ **–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞**

9Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ **¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª**

‚è± –¢–∞—Ä–∏—Ñ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫**""",
                "category": "setup_apartments"
            },
            
            # –î–æ–∫—É–º–µ–Ω—Ç—ã
            {
                "patterns": [
                    "–¥–æ–∫—É–º–µ–Ω—Ç—ã", "–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã", "–∞–∫—Ç—ã",
                    "—Å–ø—Ä–∞–≤–∫–∞", "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", "–±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è",
                    "–∫–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"
                ],
                "response": """üìÑ **–î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥–æ—Å—Ç–µ–π:**

**–î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–π (—Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü):**

‚Ä¢ –ú–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–æ–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∏ –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞**

‚Ä¢ –î–æ–≥–æ–≤–æ—Ä –Ω–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è **–Ω–∞–ø—Ä—è–º—É—é –º–µ–∂–¥—É –≥–æ—Å—Ç–µ–º –∏ –æ–±—ä–µ–∫—Ç–æ–º**

‚Ä¢ **–ü–µ—Ä–≤–∏—á–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è

‚Ä¢ –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ **—Å–ø—Ä–∞–≤–∫—É —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º —Ñ–∞–∫—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ""",
                "category": "documents"
            },
            
            # –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å
            {
                "patterns": [
                    "—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤–∫–ª—é—á–∞—Ç—å", "—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ—Ç–∫–ª—é—á–∞—Ç—å",
                    "–º–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å", "–≤–∫–ª—é—á–∏—Ç—å –≤—ã–∫–ª—é—á–∏—Ç—å",
                    "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤–∫–ª—é—á–µ–Ω–∏–µ"
                ],
                "response": """üîÑ **–í–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ B2B-—Ç–∞—Ä–∏—Ñ–∞:**

–í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∞—Ç—å –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å B2B-—Ç–∞—Ä–∏—Ñ **–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑**.

‚è± –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ç–∞—Ä–∏—Ñ –ø–æ—è–≤–∏—Ç—Å—è/–∏—Å—á–µ–∑–Ω–µ—Ç –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫**.""",
                "category": "toggle"
            },
            
            # –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è —Ç–∞—Ä–∏—Ñ
            {
                "patterns": [
                    "–∫–∞–∫ –±—ã—Å—Ç—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è", "–∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è", "—Å–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å",
                    "–≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏", "–∫–æ–≥–¥–∞ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω",
                    "–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫"
                ],
                "response": """‚è± **–í—Ä–µ–º—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ B2B-—Ç–∞—Ä–∏—Ñ–∞:**

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫**.

–¢–æ –∂–µ —Å–∞–º–æ–µ –∫–∞—Å–∞–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è ‚Äî —Ç–∞—Ä–∏—Ñ –∏—Å—á–µ–∑–Ω–µ—Ç –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è **–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫**.""",
                "category": "timing"
            },
            
            # –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç
            {
                "patterns": [
                    "—ç–∫—Å—Ç—Ä–∞–Ω–µ—Ç", "extranet", "–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç",
                    "–≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å", "–∫—É–¥–∞ –∑–∞–π—Ç–∏"
                ],
                "response": """üíª **–≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞:**

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ B2B-—Ç–∞—Ä–∏—Ñ–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤ **–≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç–µ** –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.

**–î–ª—è –æ—Ç–µ–ª–µ–π:** —Ä–∞–∑–¥–µ–ª ¬´–¢–∞—Ä–∏—Ñ—ã¬ª
**–î–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤:** —Ä–∞–∑–¥–µ–ª ¬´–û–±—ä–µ–∫—Ç—ã¬ª ‚Üí –≤—ã–±—Ä–∞—Ç—å –æ–±—ä–µ–∫—Ç ‚Üí ¬´–¶–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å¬ª ‚Üí ¬´–¢–∞—Ä–∏—Ñ—ã¬ª

üîó –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç—É, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏.""",
                "category": "extranet"
            },
            
            # –ü–æ–¥–¥–µ—Ä–∂–∫–∞
            {
                "patterns": [
                    "–ø–æ–¥–¥–µ—Ä–∂–∫–∞", "–ø–æ–º–æ—â—å", "—Å–≤—è–∑–∞—Ç—å—Å—è", "–Ω–∞–ø–∏—Å–∞—Ç—å",
                    "–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", "–ø—Ä–æ–±–ª–µ–º–∞", "–≤–æ–ø—Ä–æ—Å"
                ],
                "response": """üìû **–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤:**

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π B2B-—Ç–∞—Ä–∏—Ñ–∞, –≤—ã –º–æ–∂–µ—Ç–µ **–Ω–∞–ø–∏—Å–∞—Ç—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏** —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç.

üí° –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.""",
                "category": "support"
            },
            
            # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
            {
                "patterns": [
                    "–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä",
                    "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "—Ö–∞–π", "hello", "start"
                ],
                "response": None,  # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç
                "category": "greeting"
            },
            
            # –ë–µ–π–¥–∂
            {
                "patterns": [
                    "–±–µ–π–¥–∂", "–º–µ—Ç–∫–∞", "–∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç", "–∫–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è",
                    "–ø–æ–º–µ—Ç–∫–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π"
                ],
                "response": """üè∑ **–ö–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è B2B-—Ç–∞—Ä–∏—Ñ:**

–¢–∞—Ä–∏—Ñ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –±–µ–π–¥–∂–µ–º **¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π¬ª** –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –º–µ—Å—Ç–∞—Ö:

‚Ä¢ üîç –í –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ
‚Ä¢ üó∫ –ù–∞ –∫–∞—Ä—Ç–µ
‚Ä¢ üìù –í –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–∞—Ä–∏—Ñ–∞

–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç–∞–º –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.""",
                "category": "badge"
            },
            
            # –§–∏–ª—å—Ç—Ä
            {
                "patterns": [
                    "—Ñ–∏–ª—å—Ç—Ä", "–∫–∞–∫ –Ω–∞–π—Ç–∏", "–ø–æ–∏—Å–∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö",
                    "–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã —Ñ–∏–ª—å—Ç—Ä"
                ],
                "response": """üîç **–ü–æ–∏—Å–∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤:**

–ë–∏–∑–Ω–µ—Å-–∞—É–¥–∏—Ç–æ—Ä–∏—è –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ B2B-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–∏–ª—å—Ç—Ä **¬´–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã¬ª** –≤ –ø–æ–∏—Å–∫–µ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö.""",
                "category": "filter"
            },
            
            # –ù–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞
            {
                "patterns": [
                    "–Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–≥–æ", "–±–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ", "—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–∞—Ä–∏—Ñ",
                    "–Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —Å –Ω—É–ª—è"
                ],
                "response": """‚ö†Ô∏è **–í–∞–∂–Ω–æ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ B2B-—Ç–∞—Ä–∏—Ñ–∞:**

B2B-—Ç–∞—Ä–∏—Ñ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å **—Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞**.

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ —É –≤–∞—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –æ–±—ã—á–Ω—ã–π —Ç–∞—Ä–∏—Ñ, –∞ –∑–∞—Ç–µ–º –Ω–∞ –µ–≥–æ –±–∞–∑–µ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–æ —Å–∫–∏–¥–∫–æ–π.""",
                "category": "base_tariff"
            },
        ]
    
    def _get_greeting(self, user_name: str = "") -> str:
        """–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"""
        hour = datetime.now().hour
        if 5 <= hour < 12:
            time_greeting = "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ"
        elif 12 <= hour < 18:
            time_greeting = "–î–æ–±—Ä—ã–π –¥–µ–Ω—å"
        else:
            time_greeting = "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä"
        
        name_part = f", {user_name}" if user_name else ""
        
        return f"""üëã {time_greeting}{name_part}!

–Ø –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ **B2B-—Ç–∞—Ä–∏—Ñ–∞–º** –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤.

–ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ:
‚Ä¢ üìã –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ
‚Ä¢ ‚úÖ –ü–æ–ª—å–∑–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
‚Ä¢ üí∞ –ö–æ–º–∏—Å—Å–∏—è –∏ —É—Å–ª–æ–≤–∏—è
‚Ä¢ üè® –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª–µ–π
‚Ä¢ üè† –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
‚Ä¢ üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã

**–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å** –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏–∑ –º–µ–Ω—é üëá"""
    
    def _normalize_text(self, text: str) -> str:
        """–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞"""
        text = text.lower().strip()
        text = re.sub(r'[^\w\s]', ' ', text)
        text = re.sub(r'\s+', ' ', text)
        return text
    
    def _expand_with_synonyms(self, text: str) -> str:
        """–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏"""
        expanded = text
        for main_word, syns in self.synonyms.items():
            for syn in syns:
                if syn in text:
                    expanded += f" {main_word}"
                    break
        return expanded
    
    def find_response(self, message: str, user_name: str = "") -> str:
        """–ü–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–∞ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—é"""
        normalized = self._normalize_text(message)
        expanded = self._expand_with_synonyms(normalized)
        
        best_match = None
        best_score = 0
        
        for item in self.knowledge_base:
            score = 0
            for pattern in item["patterns"]:
                pattern_lower = pattern.lower()
                if pattern_lower in expanded:
                    score += len(pattern_lower)
                    if pattern_lower in normalized:
                        score += 15  # –ë–æ–Ω—É—Å –∑–∞ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
            
            if score > best_score:
                best_score = score
                best_match = item
        
        # –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        if best_match and best_score > 0:
            if best_match["category"] == "greeting":
                return self._get_greeting(user_name)
            return best_match["response"]
        
        # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏
        return self._unknown_response()
    
    def _unknown_response(self) -> str:
        """–û—Ç–≤–µ—Ç –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å"""
        return """ü§î –ù–µ –Ω–∞—à—ë–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –≤–∞—à–µ–º—É –≤–æ–ø—Ä–æ—Å—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ B2B-—Ç–∞—Ä–∏—Ñ–∞–º.

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å:**
‚Ä¢ –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ?
‚Ä¢ –ö–∞–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è?
‚Ä¢ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª—è?
‚Ä¢ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤?
‚Ä¢ –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã?

–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ üëá

üìû –ü–æ –¥—Ä—É–≥–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ **—Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏** —á–µ—Ä–µ–∑ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç."""


# –°–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞
bot = B2BTariffBot()


def get_main_keyboard():
    """–ì–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞"""
    keyboard = [
        [KeyboardButton("üìã –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ?")],
        [KeyboardButton("‚úÖ –ü–æ–ª—å–∑–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤"), KeyboardButton("üí∞ –ö–æ–º–∏—Å—Å–∏—è")],
        [KeyboardButton("üè® –ü–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª—è"), KeyboardButton("üè† –î–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤")],
        [KeyboardButton("üìù –£—Å–ª–æ–≤–∏—è"), KeyboardButton("üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã")],
        [KeyboardButton("‚è± –°—Ä–æ–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏"), KeyboardButton("üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞")],
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True)


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /start"""
    user = update.effective_user
    greeting = bot._get_greeting(user.first_name)
    
    await update.message.reply_text(
        greeting,
        reply_markup=get_main_keyboard(),
        parse_mode='Markdown'
    )


async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /help"""
    help_text = """üìö **–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É B2B-—Ç–∞—Ä–∏—Ñ–æ–≤:**

–≠—Ç–æ—Ç –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ **B2B-—Ç–∞—Ä–∏—Ñ–æ–≤** –Ø–Ω–¥–µ–∫—Å –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã:**
‚Ä¢ –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ
‚Ä¢ –ü–æ–ª—å–∑–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
‚Ä¢ –ö—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å
‚Ä¢ –ö—Ç–æ –º–æ–∂–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
‚Ä¢ –ö–æ–º–∏—Å—Å–∏—è (18%)
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ (5%)
‚Ä¢ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –æ—Ç–µ–ª–µ–π
‚Ä¢ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã
‚Ä¢ –°—Ä–æ–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:**
1. –ù–∞–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
2. –ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å —Ç–µ–º–æ–π

üìû –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî —Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –≠–∫—Å—Ç—Ä–∞–Ω–µ—Ç–µ."""

    await update.message.reply_text(
        help_text,
        reply_markup=get_main_keyboard(),
        parse_mode='Markdown'
    )


async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user = update.effective_user
    message_text = update.message.text
    
    # –ú–∞–ø–ø–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
    button_map = {
        "üìã –ß—Ç–æ —Ç–∞–∫–æ–µ B2B-—Ç–∞—Ä–∏—Ñ?": "—á—Ç–æ —Ç–∞–∫–æ–µ b2b —Ç–∞—Ä–∏—Ñ",
        "‚úÖ –ü–æ–ª—å–∑–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤": "–ø–æ–ª—å–∑–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞",
        "üí∞ –ö–æ–º–∏—Å—Å–∏—è": "–∫–∞–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è",
        "üè® –ü–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –æ—Ç–µ–ª—è": "–∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Ç–µ–ª—å",
        "üè† –î–ª—è –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤": "–∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã",
        "üìù –£—Å–ª–æ–≤–∏—è": "—É—Å–ª–æ–≤–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è",
        "üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã": "–∫–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã",
        "‚è± –°—Ä–æ–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏": "–∫–∞–∫ –±—ã—Å—Ç—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è",
        "üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞": "—Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
    }
    
    query = button_map.get(message_text, message_text)
    response = bot.find_response(query, user.first_name)
    
    logger.info(f"User {user.id} ({user.first_name}): {message_text}")
    
    await update.message.reply_text(
        response,
        reply_markup=get_main_keyboard(),
        parse_mode='Markdown'
    )


async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""
    logger.error(f"–û—à–∏–±–∫–∞: {context.error}")
    if update and update.message:
        await update.message.reply_text(
            "üòî –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.",
            reply_markup=get_main_keyboard()
        )


def main():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    application = Application.builder().token(BOT_TOKEN).build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CommandHandler("help", help_command))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    application.add_error_handler(error_handler)
    
    print("ü§ñ –ë–æ—Ç B2B-—Ç–∞—Ä–∏—Ñ–æ–≤ –∑–∞–ø—É—â–µ–Ω!")
    application.run_polling()


if __name__ == "__main__":
    main()
